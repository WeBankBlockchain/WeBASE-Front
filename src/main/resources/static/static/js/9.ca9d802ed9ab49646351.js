(window.webpackJsonp=window.webpackJsonp||[]).push([[9],{"8t7H":function(t,e,r){"use strict";var n=r("uXmc");r.n(n).a},Dij7:function(t,e,r){"use strict";var n=r("biRd");r.n(n).a},HAXt:function(t,e,r){"use strict";var n=r("SLYa");r.n(n).a},SLYa:function(t,e,r){},biRd:function(t,e,r){},mHBk:function(t,e,r){"use strict";var n=r("4d7F"),a=r.n(n),o=r("vDqi"),i=r.n(o),s=r("oYx3"),c=i.a.create({timeout:3e4});c.defaults.headers.post["X-Requested-With"]="XMLHttpRequest",c.defaults.responseType="json",c.defaults.validateStatus=function(){return!0},c.interceptors.response.use(function(t){return t.data&&302e3===t.data.code&&s.a.push({path:"/",query:{redirect:s.a.currentRoute.fullPath}}),t},function(t){return a.a.reject(t)});function u(t){return new a.a(function(e,r){c(t).then(function(t){e(t)}).catch(function(t){r(t)})})}function l(t){return new a.a(function(e,r){c(t).then(function(t){e(t)}).catch(function(t){r(t)})})}function d(t){return new a.a(function(e,r){c(t).then(function(t){e(t)}).catch(function(t){r(t)})})}function h(t){return new a.a(function(e,r){c(t).then(function(t){e(t)}).catch(function(t){r(t)})})}var f=r("DgvE");r("Qyje");r.d(e,"A",function(){return p}),r.d(e,"c",function(){return g}),r.d(e,"f",function(){return v}),r.d(e,"b",function(){return b}),r.d(e,"g",function(){return w}),r.d(e,"j",function(){return S}),r.d(e,"h",function(){return y}),r.d(e,"l",function(){return _}),r.d(e,"k",function(){return C}),r.d(e,"o",function(){return I}),r.d(e,"i",function(){return x}),r.d(e,"m",function(){return k}),r.d(e,"q",function(){return N}),r.d(e,"p",function(){return T}),r.d(e,"s",function(){return O}),r.d(e,"n",function(){return L}),r.d(e,"u",function(){return D}),r.d(e,"y",function(){return j}),r.d(e,"w",function(){return $}),r.d(e,"r",function(){return M}),r.d(e,"v",function(){return q}),r.d(e,"x",function(){return z}),r.d(e,"z",function(){return R}),r.d(e,"d",function(){return H}),r.d(e,"B",function(){return G}),r.d(e,"a",function(){return V}),r.d(e,"e",function(){return A}),r.d(e,"C",function(){return E}),r.d(e,"t",function(){return U});var m=null;function p(t){return d({url:url.ORG_LIST+"/account/passwordUpdate",method:"put",data:t})}function g(t){return l({url:url.ORG_LIST+"/network/transDaily/"+t,method:"get"})}function v(t){return l({url:url.ORG_LIST+"/network/general/"+t,method:"get"})}function b(t,e){var r=Object(f.g)(t,e);return l({url:url.ORG_LIST+"/block/blockList/"+r.str,method:"get",params:r.querys})}function w(t,e){var r=Object(f.g)(t,e);return l({url:url.FRONT_PROXY+"/node/nodeList/"+r.str,method:"get",params:r.querys})}function S(t,e){var r=Object(f.g)(t,e);return l({url:url.ORG_LIST+"/monitor/transList/"+r.str,method:"get",params:r.querys})}function y(t,e){var r=Object(f.g)(t,e);return l({url:url.ORG_LIST+"/transaction/transList/"+r.str,method:"get",params:r.querys})}function _(t,e){var r=Object(f.g)(t,e);return l({url:url.ORG_LIST+"/monitor/userList/"+r.str,method:"get",params:r.querys})}function C(t,e){var r=Object(f.g)(t,e);return l({url:url.ORG_LIST+"/monitor/interfaceList/"+r.str,method:"get",params:r.querys})}function I(t){return l({url:""+m+t+"/web3/clientVersion",method:"get"})}function x(t,e){var r=Object(f.g)(t,e);return l({url:m+"performance/"+r.str,method:"get",params:r.querys})}function k(t,e){var r=Object(f.g)(t,e);return l({url:m+"chain/"+r.str,method:"get",params:r.querys})}function N(){return l({url:m+"1/web3/groupList",method:"get"})}function T(t,e){var r=Object(f.g)(t,e);return l({url:m+"privateKey",method:"get",params:r.querys})}function O(t,e){var r=Object(f.g)(t,e);return l({url:m+"privateKey/import",method:"get",params:r.querys})}function L(t){return l({url:""+m+t+"/web3/blockNumber",method:"get"})}function D(t){return l({url:""+m+t+"/web3/groupPeers",method:"get"})}function j(t){return l({url:""+m+t+"/web3/transaction-total",method:"get"})}function $(t){return l({url:""+m+t+"/web3/pending-transactions-count",method:"get"})}function M(t,e){var r=Object(f.g)(t,e);return l({url:""+m+t+"/web3/search",method:"get",params:r.querys,responseType:"json"})}function q(t){return l({url:""+m+t+"/web3/getNodeStatusList",method:"get"})}function z(t,e){return l({url:""+m+t+"/web3/transaction/"+e,method:"get"})}function R(t,e){return l({url:""+m+t+"/web3/transactionReceipt/"+e,method:"get"})}function H(t){return l({url:m+"contract/contractList",method:"post",data:t})}function G(t){return u({url:m+"contract/save",method:"post",data:t})}function V(t,e){var r=Object(f.g)(t,e);return h({url:m+"contract/"+r.str,method:"delete"})}function A(t){return u({url:m+"contract/deploy",method:"post",data:t,responseType:"text"})}function E(t){return u({url:m+"trans/handle",method:"post",data:t})}function U(t,e){return u({url:m+"contract/compile-java",method:"post",data:t,responseType:"blob/json"})}m=""},qse9:function(t,e,r){"use strict";var n=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"content-head-wrapper"},[r("div",{staticClass:"content-head-title"},[t.icon?r("span",{staticClass:"content-head-icon",on:{click:t.skip}},[r("i",{staticClass:"wbs-icon-back"})]):t._e(),t._v(" "),r("span",{class:{"font-color-9da2ab":t.headSubTitle}},[t._v(t._s(t.title))]),t._v(" "),r("span",{directives:[{name:"show",rawName:"v-show",value:t.headSubTitle,expression:"headSubTitle"}],staticClass:"font-color-9da2ab"},[t._v("/")]),t._v(" "),r("span",[t._v(t._s(t.headSubTitle))])]),t._v(" "),r("div",{staticClass:"content-head-network"},[t.version?r("div",{staticClass:"content-head-item font-color-8798ad"},[r("span",[t._v("当前版本:"+t._s(t.version))])]):t._e(),t._v(" "),r("div",{staticClass:"content-head-item"},[r("span",{staticStyle:{padding:"1px 5px","border-left":"1px solid #657d95"}}),t._v(" "),r("span",{staticClass:"font-color-fff group-content",on:{click:function(e){t.groupVisible=!t.groupVisible}}},[t._v("\n                群组："+t._s(t.groupName)+"\n                "),r("ul",{directives:[{name:"show",rawName:"v-show",value:t.groupVisible,expression:"groupVisible"}]},t._l(t.groupList,function(e){return r("li",{key:e.group,on:{click:function(r){t.changeGroup(e)}}},[t._v(t._s(e.groupName))])}),0)]),t._v(" "),r("i",{class:[t.groupVisible?"el-icon-arrow-up":"el-icon-arrow-down","select-network"]})])])])};n._withStripped=!0;var a=r("gDS+"),o=r.n(a),i=r("oYx3"),s=r("mHBk"),c=(r("DgvE"),{name:"conetnt-head",props:["headTitle","icon","route","headSubTitle"],components:{},watch:{headTitle:function(t){this.title=t}},data:function(){return{title:this.headTitle,headIcon:this.icon||!1,way:this.route||"",path:"",group:localStorage.getItem("groupId")?localStorage.getItem("groupId"):"1",groupName:localStorage.getItem("groupName")?localStorage.getItem("groupName"):"group1",groupVisible:!1,groupList:localStorage.getItem("cluster")?JSON.parse(localStorage.getItem("cluster")):[],version:localStorage.getItem("fisco-bcos-version")?localStorage.getItem("fisco-bcos-version"):""}},mounted:function(){localStorage.getItem("groupId")&&(this.group=localStorage.getItem("groupId")),"/home"==this.$route.path&&(this.getGroup(),this.getClientVersion())},methods:{getClientVersion:function(){var t=this;Object(s.o)(this.group).then(function(e){var r=e.data,n=e.status;e.statusText;200===n?(t.version=r["FISCO-BCOS Version"],localStorage.setItem("fisco-bcos-version",t.version)):t.$message({type:"error",message:r.errorMessage||"系统错误"})}).catch(function(e){t.$message({type:"error",message:"系统错误"})})},getGroup:function(){var t=this;Object(s.q)().then(function(e){var r=e.data,n=e.status;e.statusText;if(200===n){for(var a=r.sort(),i=[],s=0;s<a.length;s++)i.push({group:a[s],groupName:"group"+a[s]});t.groupList=i,localStorage.setItem("groupId",t.group),localStorage.setItem("cluster",o()(i))}else t.$message({type:"error",message:r.errorMessage||"系统错误"})}).catch(function(e){t.$message({type:"error",message:"系统错误"})})},skip:function(){this.route?i.a.push(this.way):this.$router.go(-1)},changeGroup:function(t){this.group=t.group,this.groupName=t.groupName,this.path=this.$route.path,localStorage.setItem("groupId",this.group),localStorage.setItem("groupName",this.groupName),this.$emit("changeGroup",this.group),this.getClientVersion()}}}),u=(r("8t7H"),r("KHd+")),l=Object(u.a)(c,n,[],!1,null,"7ba17399",null);l.options.__file="src/components/contentHead.vue";e.a=l.exports},uXmc:function(t,e,r){},xrW5:function(t,e,r){"use strict";r.r(e);var n=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",[r("v-content-head",{attrs:{headTitle:"交易审计",headSubTitle:t.headSubTitle}}),t._v(" "),r("div",{staticClass:"module-wrapper"},[r("div",{staticClass:"more-search-table search-min-width"},[r("div",{staticClass:"text-left"},[r("div",{staticClass:"text-left-label"},[r("span",[t._v("用户：")]),t._v(" "),r("el-select",{staticClass:"select-32",attrs:{clearable:""},on:{change:t.changeUserName},model:{value:t.userName,callback:function(e){t.userName=e},expression:"userName"}},t._l(t.userList,function(e){return r("el-option",{key:e.userName,attrs:{label:e.userName,value:e.userName}},[0==e.userType?r("span",[t._v(t._s(e.userName))]):r("span",{staticClass:"font-color-ed5454"},[t._v(t._s(e.userName))])])}),1)],1),t._v(" "),r("div",{staticClass:"text-left-label"},[r("span",{staticClass:"text-left-label-title"},[t._v("时长：")]),t._v(" "),r("el-date-picker",{staticClass:"date-select-32",attrs:{type:"datetimerange","picker-options":t.transPickerOptions,"range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期",align:"left","value-format":"yyyy-MM-dd HH:mm:ss"},on:{change:t.changeDate},model:{value:t.transDate,callback:function(e){t.transDate=e},expression:"transDate"}})],1),t._v(" "),r("div",{staticClass:"text-left-label1"},[r("span",{staticClass:"text-left-label1-title"},[t._v("接口：")]),t._v(" "),r("el-select",{staticClass:"select-32",attrs:{clearable:""},on:{change:t.changeInterfaceName},model:{value:t.interfaceName,callback:function(e){t.interfaceName=e},expression:"interfaceName"}},t._l(t.interfaceList,function(e){return r("el-option",{key:e.interfaceName,attrs:{label:e.interfaceName,value:e.interfaceName}},[0==e.transUnusualType?r("span",[t._v(t._s(e.interfaceName))]):r("span",{staticClass:"font-color-ed5454"},[t._v(t._s(e.interfaceName))])])}),1)],1)]),t._v(" "),r("div",{staticClass:"divide-line"})]),t._v(" "),r("div",{ref:"chart",staticClass:"chart"},[t.chartStatistics.show?r("v-chart",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],ref:"linechart",attrs:{id:"transId",chartStatistics:t.chartStatistics,reload:t.reloadNum}}):t._e()],1)])],1)};n._withStripped=!0;var a=function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticStyle:{"padding-left":"30px"}},[e("div",{staticClass:"charts-title text-left"},[e("span",{staticClass:"total-count"},[this._v("当前总数量："+this._s(this.numberFormat(this.chartStatistics.totalCount,0,".",",")))])]),this._v(" "),e("div",{staticStyle:{"min-width":"250px",height:"476px",margin:"0 auto"},attrs:{id:this.chartId}})])};a._withStripped=!0;var o=r("YEIV"),i=r.n(o),s=r("DgvE"),c=r("ProS");r("75ce"),r("Ynxi"),r("AH3D"),r("zRKj"),r("0o9m"),r("Cm0C");var u={name:"charts",props:{chartStatistics:{type:Object},id:{type:String},reload:{type:Number}},data:function(){return{chartId:this.id,chartSize:this.chartStatistics.chartSize,chart:"",numberFormat:s.f}},watch:{reload:{handler:function(t){this.chartShow()}}},mounted:function(){this.$nextTick(function(){this.chartShow()})},beforeDestroy:function(){var t=this;window.onresize=null,this.chart&&setTimeout(function(){t.chart.dispose()},600)},methods:{chartShow:function(){var t,e=this;this.chart=c.init(document.getElementById(this.chartId));var r=this.chartStatistics.data.length,n=0;0<=r&&r<28?n=0:28<=r&&r<60?n=1:60<=r&&r<80?n=2:80<=r&&r<100?n=4:100<=r&&r<120?n=6:r>=120&&(n=8);var a={legend:{height:this.chartSize.height,width:this.chartSize.width},noDataLoadingOption:{text:"暂无数据",effect:"bubble",effectOption:{effect:{n:0}}},default:{text:"loading",color:"#2878ff",textColor:"#2878ff",maskColor:"rgba(255, 255, 255, 0.8)",zlevel:0},tooltip:{show:!0,trigger:"axis",formatter:function(t){return'<span style="font-size:10px">'+t[0].name+'</span><br><table ><tr><td style="padding:0"><span style="font-size:10px;color:white">交易量：'+t[0].value+"笔</a></span><br></td></tr></table>"}},grid:{left:43,right:33,top:5,bottom:60},series:[(t={type:"line",symbolSize:1,itemStyle:{normal:{color:"#2878ff",lineStyle:{color:"#2878ff"}}}},i()(t,"symbolSize",5),i()(t,"data",this.chartStatistics.transactionDataArr),t)],xAxis:{data:this.chartStatistics.data,axisLine:{lineStyle:{color:"#e9e9e9",width:2}},axisLabel:{interval:n,rotate:0,textStyle:{color:"rgba(0,14,31,0.62)"},fontSize:10}},yAxis:{axisLine:{show:!1,lineStyle:{color:"#333"}},splitLine:{show:!0,lineStyle:{type:"dashed",color:"#e9e9e9"}},axisTick:{show:!1},axisLabel:{formatter:function(t,e){return t>1e3&&t<1e6?t/1e3+"K":t>1e6||1e6===t?t/1e6+"M":t+""},textStyle:{color:"rgba(0,14,31,0.62)"}}}};this.chart.setOption(a,!0),window.onresize=function(){e.chart.resize()}}}},l=(r("Dij7"),r("KHd+")),d=Object(l.a)(u,a,[],!1,null,null,null);d.options.__file="src/views/transactionCharts/components/chart.vue";var h=d.exports,f=r("qse9"),m=r("mHBk"),p={name:"transactionCharts",components:{"v-content-head":f.a,"v-chart":h},data:function(){return{loading:!1,networkId:localStorage.getItem("networkId"),headSubTitle:"用户交易",reloadNum:1,chartStatistics:{show:!0,data:[],transactionDataArr:[],chartSize:{width:0,height:0},totalCount:""},userList:[],interfaceList:[],userName:"",interfaceName:"",transDate:[],transPickerOptions:{shortcuts:[{text:"最近一周",onClick:function(t){var e=new Date,r=new Date,n=r.getTime();r.setTime(n-6048e5),t.$emit("pick",[r,e])}},{text:"最近一个月",onClick:function(t){var e=new Date,r=new Date,n=r.getTime();r.setTime(n-2592e6),t.$emit("pick",[r,e])}},{text:"最近三个月",onClick:function(t){var e=new Date,r=new Date,n=r.getTime();r.setTime(n-7776e6),t.$emit("pick",[r,e])}}],disabledDate:function(t){return t.getTime()>Date.now()-864e4}}}},mounted:function(){var t=this;this.$nextTick(function(){t.chartStatistics.chartSize.width=t.$refs.chart.offsetWidth,t.chartStatistics.chartSize.height=t.$refs.chart.offsetHeight,t.getMonitorTransactionInfo(),t.getMonitorUserList()})},methods:{getMonitorTransactionInfo:function(){var t=this;this.loading=!0;var e={networkId:this.networkId},r={};r={userName:this.userName,interfaceName:this.interfaceName},this.transDate&&(r.startDate=this.transDate[0],r.endDate=this.transDate[1]),Object(m.j)(e,r).then(function(e){if(t.loading=!1,0==e.data.code){var r=e.data.data.transInfoList,n=r.length;if(0===n)t.$set(t.chartStatistics,"data",[]),t.$set(t.chartStatistics,"transactionDataArr",[]),t.$set(t.chartStatistics,"totalCount",0);else{var a=Object(s.d)(new Date(r[0].time).getTime(),"yyyy-MM-dd"),o=Object(s.d)(new Date(r[n-1].time).getTime(),"yyyy-MM-dd");r.forEach(function(t){t.time=Object(s.d)(new Date(t.time).getTime(),"MM-dd")});var i={};r.forEach(function(t){var e=i[t.time];e?e+=t.transCount:e=t.transCount,i[t.time]=e});var c=[],u={};for(var l in i)u={transCount:i[l],time:l},c.push(u);var d=(c=Object(s.b)(a,o,c)).map(function(t){return t.time}),h=c.map(function(t){return t.transCount});t.$set(t.chartStatistics,"data",d),t.$set(t.chartStatistics,"transactionDataArr",h),t.$set(t.chartStatistics,"totalCount",e.data.data.totalCount)}t.reloadNum++}else t.$message({type:"error",message:t.errcode.errCode[e.data.code].cn})}).catch(function(e){t.$message({type:"error",message:t.errcode.errCode[e.data.code].cn||"获取监管用户列表失败！"})})},getMonitorUserList:function(){var t=this,e={networkId:this.networkId};Object(m.l)(e,{}).then(function(e){0==e.data.code?t.userList=e.data.data:t.$message({type:"error",message:t.errcode.errCode[e.data.code].cn})}).catch(function(e){t.$message({type:"error",message:t.errcode.errCode[e.data.code].cn||"获取监管用户列表失败！"})})},getMonitorUserInterfaceList:function(t){var e,r=this,n={networkId:this.networkId};e={userName:t},Object(m.k)(n,e).then(function(t){0==t.data.code?r.interfaceList=t.data.data:r.$message({type:"error",message:r.errcode.errCode[t.data.code].cn})}).catch(function(t){r.$message({type:"error",message:r.errcode.errCode[t.data.code].cn||"获取监管用户列表失败！"})})},changeUserName:function(t){this.getMonitorUserInterfaceList(t),this.getMonitorTransactionInfo()},changeDate:function(){this.getMonitorTransactionInfo()},changeInterfaceName:function(){this.getMonitorTransactionInfo()}}},g=(r("HAXt"),Object(l.a)(p,n,[],!1,null,"532180ed",null));g.options.__file="src/views/transactionCharts/transactionCharts.vue";e.default=g.exports}}]);