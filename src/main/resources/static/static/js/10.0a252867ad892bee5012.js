(window.webpackJsonp=window.webpackJsonp||[]).push([[10],{GsGL:function(e,o,t){},LFHq:function(e,o,t){"use strict";var s=t("GsGL");t.n(s).a},VI5Z:function(e,o,t){"use strict";t.r(o);var s=function(){var e=this,o=e.$createElement,t=e._self._c||o;return t("div",[t("v-content-head",{attrs:{headTitle:"节点管理"},on:{changeGroup:e.changeGroup}}),e._v(" "),t("div",{staticClass:"module-wrapper"},[t("div",{staticClass:"search-part"}),e._v(" "),t("div",{staticClass:"search-table"},[t("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticClass:"search-table-content",attrs:{data:e.nodeData}},e._l(e.nodeHead,function(o){return t("el-table-column",{key:o.enName,attrs:{label:o.name,"show-overflow-tooltip":"",align:"center"},scopedSlots:e._u([{key:"default",fn:function(s){return["operate"!=o.enName?["nodeActive"===o.enName?t("span",[t("i",{staticClass:"wbs-icon-radio font-6",style:{color:e.textColor(s.row[o.enName])}}),e._v(" "+e._s(e.nodesStatus(s.row[o.enName]))+"\n                            ")]):"nodeIp"===o.enName?t("span",{on:{click:function(o){e.showDetail(s.row)}}},[e._v(e._s(s.row[o.enName]))]):t("span",[e._v(e._s(s.row[o.enName]))])]:void 0]}}])})}),1),e._v(" "),t("div",{staticStyle:{height:"20px"}}),e._v(" "),e.nodesDialogVisible?t("el-dialog",{staticClass:"dialog-wrapper",attrs:{visible:e.nodesDialogVisible,title:e.nodesDialogTitle,width:"433px","append-to-body":!0,center:!0},on:{"update:visible":function(o){e.nodesDialogVisible=o}}},[t("v-nodesDialog",{attrs:{nodesDialogOptions:e.nodesDialogOptions},on:{success:e.success,close:e.close}})],1):e._e()],1)])],1)};s._withStripped=!0;var n=t("qse9"),a=function(){var e=this,o=e.$createElement,t=e._self._c||o;return t("div",[t("el-form",{ref:"nodesForm",staticClass:"demo-ruleForm",attrs:{model:e.nodesForm,rules:e.rules,"label-width":"108px"}},[t("el-form-item",{staticStyle:{width:"330px"},attrs:{label:"节点IP",prop:"nodeIp"}},[t("el-input",{attrs:{placeholder:"请输入IP",disabled:e.nodesForm.disabled},model:{value:e.nodesForm.nodeIp,callback:function(o){e.$set(e.nodesForm,"nodeIp",o)},expression:"nodesForm.nodeIp"}})],1),e._v(" "),e.nodesForm.dShow?t("el-form-item",{staticStyle:{width:"330px"},attrs:{label:"前置服务端口",prop:"frontPort"}},[t("el-input",{attrs:{placeholder:"请输入前置服务端口",disabled:e.nodesForm.disabled},model:{value:e.nodesForm.frontPort,callback:function(o){e.$set(e.nodesForm,"frontPort",o)},expression:"nodesForm.frontPort"}})],1):e._e()],1),e._v(" "),t("div",{staticClass:"dialog-footer"},[t("el-button",{on:{click:e.modelClose}},[e._v("取 消")]),e._v(" "),t("el-button",{attrs:{type:"primary",loading:e.loading},on:{click:function(o){e.submit("nodesForm")}}},[e._v("确 定")])],1)],1)};a._withStripped=!0;var i=t("P2sY"),r=t.n(i),d=t("mHBk"),l=(t("bCcq").sha256,{name:"nodesDialog",props:{nodesDialogOptions:{type:Object}},watch:{"nodesDialogOptions.type":{handler:function(e){switch(this.type=e,e){case"creat":this.nodesForm={nodeIp:"",org:"1",frontPort:"",disabled:!1,mDisabled:!1,dShow:!0};break;case"delete":this.nodesForm={nodeIp:this.nodesDialogOptions.data.nodeIp,nodeId:this.nodesDialogOptions.data.nodeId,disabled:!0,mDisabled:!0,dShow:!1}}},deep:!0,immediate:!0}},data:function(){return{type:this.nodesDialogOptions.type,loading:!1,nodesForm:{},rules:{nodeIp:[{required:!0,message:"请输入IP",trigger:"blur"},{pattern:/^(\d{1,2}|1\d\d|2[0-4]\d|25[0-5])\.(\d{1,2}|1\d\d|2[0-4]\d|25[0-5])\.(\d{1,2}|1\d\d|2[0-4]\d|25[0-5])\.(\d{1,2}|1\d\d|2[0-4]\d|25[0-5])$/,message:"IP格式不正确",trigger:"blur"}],frontPort:[{required:!0,message:"请输入端口",trigger:"blur"},{pattern:/^[1-9]\d*$/,message:"请输入正确端口号",trigger:"blur"},{min:1,max:12,message:"长度在 1 到 12 个字符",trigger:"blur"}]}}},mounted:function(){},methods:{modelClose:function(){this.nodesForm=r()({nodeIp:"",frontPort:""}),this.$emit("close",!1)},submit:function(e){var o=this;this.$refs[e].validate(function(e){if(!e)return!1;o.loading=!0,o.getAllAccountInfo()})},getAllAccountInfo:function(){switch(this.type){case"creat":this.getCreatNodesInfo();break;case"delete":this.getDeleteNodesInfo()}},getCreatNodesInfo:function(){var e=this,o={networkId:localStorage.getItem("networkId"),nodeIp:this.nodesForm.nodeIp,nodeType:this.nodesForm.org,frontPort:this.nodesForm.frontPort};Object(d.addnodes)(o,{}).then(function(o){e.loading=!1,0===o.data.code?(e.$message({type:"success",message:"新增成功"}),e.modelClose(),e.$emit("success")):(e.modelClose(),e.$message({type:"error",message:e.errcode.errCode[o.data.code].cn}))}).catch(function(o){e.modelClose(),e.$message({type:"error",message:e.errcode.errCode[o.data.code].cn||"系统错误"})})},getDeleteNodesInfo:function(){var e=this;Object(d.deleteNodes)(this.nodesForm.nodeId,{}).then(function(o){e.loading=!1,0===o.data.code?(e.$message({type:"success",message:"删除成功"}),e.modelClose(),e.$emit("success")):(e.modelClose(),e.$message({type:"error",message:e.errcode.errCode[o.data.code].cn}))}).catch(function(o){e.modelClose(),e.$message({type:"error",message:e.errcode.errCode[o.data.code].cn||"系统错误"})})}}}),c=(t("wEUD"),t("KHd+")),u=Object(c.a)(l,a,[],!1,null,"42f0e08a",null);u.options.__file="src/views/group/components/nodesDialog.vue";var g=u.exports,p=(t("DgvE"),t("p5Bo"),{name:"group",components:{"v-content-head":n.a,"v-nodesDialog":g},watch:{$route:function(){this.urlQuery=this.$root.$route.query}},data:function(){return{nodeName:"",nodes:[],nodeData:[],currentPage:1,pageSize:10,total:0,loading:!1,nodesLoading:!1,nodesDialogVisible:!1,nodesDialogTitle:"",nodesDialogOptions:{},nodeHead:[{enName:"ipandPort",name:"ip和端口 "},{enName:"blockNumber",name:"块高 "}],urlQuery:this.$root.$route.query,group:localStorage.getItem("groupName")?localStorage.getItem("groupName"):"1"}},mounted:function(){this.getNodeTable()},methods:{changeGroup:function(e){this.group=e,this.getNodeTable()},search:function(){this.getNodeTable()},getNodeTable:function(){var e=this;this.loading=!0;var o,t={pageNumber:this.currentPage,pageSize:this.pageSize};o={nodeName:this.nodeName.replace(/^\s+|\s+$/g,"")},Object(d.y)(t,o,this.group).then(function(o){var t=o.data,s=o.status,n=o.statusText;200===s?(e.nodeData=t||[],e.loading=!1):(e.loading=!1,e.$message({message:n,type:"error",duration:2e3}))}).catch(function(o){e.loading=!1,e.$message({message:"查询失败！",type:"error",duration:2e3})})},handleSizeChange:function(e){this.pageSize=e,this.currentPage=1,this.getNodeTable()},handleCurrentChange:function(e){this.currentPage=e,this.getNodeTable()},textColor:function(e){var o="";switch(e){case 1:o="#58cb7d";break;case 2:o="#ed5454"}return o},nodesStatus:function(e){var o="";switch(e){case 1:o="运行";break;case 2:o="停止"}return o},deleteNodes:function(e,o){this.nodesDialogOptions={type:o,data:e},this.nodesDialogVisible=!0,this.nodesDialogTitle="删除节点"},success:function(){this.getNodeTable()},close:function(e){this.nodesDialogVisible=e},showDetail:function(e){}}}),m=(t("LFHq"),Object(c.a)(p,s,[],!1,null,"cb5a3176",null));m.options.__file="src/views/group/group.vue";o.default=m.exports},W10h:function(e,o,t){},wEUD:function(e,o,t){"use strict";var s=t("W10h");t.n(s).a}}]);